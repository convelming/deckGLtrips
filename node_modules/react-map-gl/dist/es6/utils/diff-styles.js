export function diffSources(prevStyle,nextStyle){const prevSources=prevStyle.get("sources"),nextSources=nextStyle.get("sources"),enter=[],update=[],exit=[],prevIds=prevSources.keySeq().toArray(),nextIds=nextSources.keySeq().toArray();for(const id of prevIds){const nextSource=nextSources.get(id);nextSource?!nextSource.equals(prevSources.get(id))&&update.push({id,source:nextSources.get(id)}):exit.push({id,source:prevSources.get(id)})}for(const id of nextIds){const prevSource=prevSources.get(id);prevSource||enter.push({id,source:nextSources.get(id)})}return{enter,update,exit}}export function diffLayers(prevStyle,nextStyle){const prevLayers=prevStyle.get("layers"),nextLayers=nextStyle.get("layers"),updates=[],exiting=[],prevMap={},nextMap={};nextLayers.forEach((layer,index)=>{const id=layer.get("id"),layerImBehind=nextLayers.get(index+1);nextMap[id]={layer,id,before:layerImBehind?layerImBehind.get("id"):null,enter:!0}}),prevLayers.forEach((layer,index)=>{const id=layer.get("id"),layerImBehind=prevLayers.get(index+1);prevMap[id]={layer,id,before:layerImBehind?layerImBehind.get("id"):null},nextMap[id]?nextMap[id].enter=!1:exiting.push(prevMap[id])});for(const layer of nextLayers.reverse()){const id=layer.get("id");prevMap[id]&&prevMap[id].layer.equals(nextMap[id].layer)&&prevMap[id].before===nextMap[id].before||updates.push(nextMap[id])}return{updates,exiting}}export default function diffStyle(prevStyle,nextStyle){return{sourcesDiff:diffSources(prevStyle,nextStyle),layersDiff:diffLayers(prevStyle,nextStyle)}}
//# sourceMappingURL=diff-styles.js.map