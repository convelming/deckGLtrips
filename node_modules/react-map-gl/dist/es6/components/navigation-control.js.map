{"version":3,"sources":["../../../src/components/navigation-control.js"],"names":["createElement","PropTypes","BaseControl","MapState","TransitionManager","deprecateWarn","LINEAR_TRANSITION_PROPS","Object","assign","defaultProps","transitionDuration","propTypes","className","string","onViewStateChange","func","onViewportChange","showCompass","bool","showZoom","NavigationControl","constructor","props","_updateViewport","bind","_onZoomIn","_onZoomOut","_onResetNorth","_renderCompass","_renderButton","shouldComponentUpdate","nextProps","nextState","nextContext","context","viewport","bearing","opts","mapState","viewState","getViewportProps","onChangeViewport","zoom","pitch","style","transform","type","label","callback","children","key","title","onClick","render","ref","_onContainerLoad","displayName"],"mappings":"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","sourcesContent":["import {createElement} from 'react';\nimport PropTypes from 'prop-types';\nimport BaseControl from './base-control';\n\nimport MapState from '../utils/map-state';\nimport TransitionManager from '../utils/transition-manager';\n\nimport deprecateWarn from '../utils/deprecate-warn';\n\nconst LINEAR_TRANSITION_PROPS = Object.assign({}, TransitionManager.defaultProps, {\n  transitionDuration: 300\n});\n\nconst propTypes = Object.assign({}, BaseControl.propTypes, {\n  // Custom className\n  className: PropTypes.string,\n  // Callbacks fired when the user interacted with the map. The object passed to the callbacks\n  // contains viewport properties such as `longitude`, `latitude`, `zoom` etc.\n  onViewStateChange: PropTypes.func,\n  onViewportChange: PropTypes.func,\n  // Show/hide compass button\n  showCompass: PropTypes.bool,\n  // Show/hide zoom buttons\n  showZoom: PropTypes.bool\n});\n\nconst defaultProps = Object.assign({}, BaseControl.defaultProps, {\n  className: '',\n  onViewStateChange: () => {},\n  onViewportChange: () => {},\n  showCompass: true,\n  showZoom: true\n});\n\n/*\n * PureComponent doesn't update when context changes, so\n * implementing our own shouldComponentUpdate here.\n */\nexport default class NavigationControl extends BaseControl {\n\n  constructor(props) {\n    super(props);\n    // Check for deprecated props\n    deprecateWarn(props);\n\n    this._updateViewport = this._updateViewport.bind(this);\n    this._onZoomIn = this._onZoomIn.bind(this);\n    this._onZoomOut = this._onZoomOut.bind(this);\n    this._onResetNorth = this._onResetNorth.bind(this);\n    this._renderCompass = this._renderCompass.bind(this);\n    this._renderButton = this._renderButton.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState, nextContext) {\n    return this.context.viewport.bearing !== nextContext.viewport.bearing;\n  }\n\n  _updateViewport(opts) {\n    const {viewport} = this.context;\n    const mapState = new MapState(Object.assign({}, viewport, opts));\n    const viewState = Object.assign({}, mapState.getViewportProps(), LINEAR_TRANSITION_PROPS);\n\n    // Call new style callback\n    this.props.onViewStateChange({viewState});\n\n    // Call old style callback\n    // TODO(deprecate): remove this check when `onChangeViewport` gets deprecated\n    const onViewportChange = this.props.onChangeViewport || this.props.onViewportChange;\n    onViewportChange(viewState);\n  }\n\n  _onZoomIn() {\n    this._updateViewport({zoom: this.context.viewport.zoom + 1});\n  }\n\n  _onZoomOut() {\n    this._updateViewport({zoom: this.context.viewport.zoom - 1});\n  }\n\n  _onResetNorth() {\n    this._updateViewport({bearing: 0, pitch: 0});\n  }\n\n  _renderCompass() {\n    const {bearing} = this.context.viewport;\n    return createElement('span', {\n      className: 'mapboxgl-ctrl-compass-arrow',\n      style: {transform: `rotate(${bearing}deg)`}\n    });\n  }\n\n  _renderButton(type, label, callback, children) {\n    return createElement('button', {\n      key: type,\n      className: `mapboxgl-ctrl-icon mapboxgl-ctrl-${type}`,\n      type: 'button',\n      title: label,\n      onClick: callback,\n      children\n    });\n  }\n\n  render() {\n\n    const {className, showCompass, showZoom} = this.props;\n\n    return createElement('div', {\n      className: `mapboxgl-ctrl mapboxgl-ctrl-group ${className}`,\n      ref: this._onContainerLoad\n    }, [\n      showZoom && this._renderButton('zoom-in', 'Zoom In', this._onZoomIn),\n      showZoom && this._renderButton('zoom-out', 'Zoom Out', this._onZoomOut),\n      showCompass &&\n        this._renderButton('compass', 'Reset North', this._onResetNorth, this._renderCompass())\n    ]);\n  }\n}\n\nNavigationControl.displayName = 'NavigationControl';\nNavigationControl.propTypes = propTypes;\nNavigationControl.defaultProps = defaultProps;\n"],"file":"navigation-control.js"}