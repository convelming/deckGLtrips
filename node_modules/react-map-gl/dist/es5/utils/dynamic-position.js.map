{"version":3,"sources":["../../../src/utils/dynamic-position.js"],"names":["ANCHOR_POSITION","top","x","y","bottom","left","right","getDynamicPosition","width","height","selfWidth","selfHeight","anchor","padding","anchorX","anchorY","yStep","xStep","Math","floor","Object","keys","find","positionType","anchorPosition"],"mappings":"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","sourcesContent":["\nexport const ANCHOR_POSITION = {\n  top: {x: 0.5, y: 0},\n  'top-left': {x: 0, y: 0},\n  'top-right': {x: 1, y: 0},\n  bottom: {x: 0.5, y: 1},\n  'bottom-left': {x: 0, y: 1},\n  'bottom-right': {x: 1, y: 1},\n  left: {x: 0, y: 0.5},\n  right: {x: 1, y: 0.5}\n};\n\n/**\n * Calculate the dynamic position for a popup to fit in a container.\n * @param {Number} x - x position of the anchor on screen\n * @param {Number} y - y position of the anchor on screen\n * @param {Number} width - width of the container\n * @param {Number} height - height of the container\n * @param {Number} padding - extra space from the edge in pixels\n * @param {Number} selfWidth - width of the popup\n * @param {Number} selfHeight - height of the popup\n * @param {String} anchor - type of the anchor, one of 'top', 'bottom',\n    'left', 'right', 'top-left', 'top-right', 'bottom-left' , and  'bottom-right'\n * @returns {String} position - one of 'top', 'bottom',\n    'left', 'right', 'top-left', 'top-right', 'bottom-left' , and  'bottom-right'\n */\nexport function getDynamicPosition({\n  x, y,\n  width, height,\n  selfWidth, selfHeight,\n  anchor,\n  padding = 0\n}) {\n  let {x: anchorX, y: anchorY} = ANCHOR_POSITION[anchor];\n\n  // anchorY: top - 0, center - 0.5, bottom - 1\n  let top = y - anchorY * selfHeight;\n  let bottom = top + selfHeight;\n  // If needed, adjust anchorY at 0.5 step between [0, 1]\n  const yStep = 0.5;\n\n  if (top < padding) {\n    // Top edge is outside, try move down\n    while (top < padding && anchorY >= yStep) {\n      anchorY -= yStep;\n      top += yStep * selfHeight;\n    }\n  } else if (bottom > height - padding) {\n    // bottom edge is outside, try move up\n    while (bottom > height - padding && anchorY <= 1 - yStep) {\n      anchorY += yStep;\n      bottom -= yStep * selfHeight;\n    }\n  }\n\n  // anchorX: left - 0, center - 0.5, right - 1\n  let left = x - anchorX * selfWidth;\n  let right = left + selfWidth;\n\n  // If needed, adjust anchorX at 0.5 step between [0, 1]\n  let xStep = 0.5;\n  if (anchorY === 0.5) {\n    // If y is centered, then x cannot also be centered\n    anchorX = Math.floor(anchorX);\n    xStep = 1;\n  }\n\n  if (left < padding) {\n    // Left edge is outside, try move right\n    while (left < padding && anchorX >= xStep) {\n      anchorX -= xStep;\n      left += xStep * selfWidth;\n    }\n  } else if (right > width - padding) {\n    // Right edge is outside, try move left\n    while (right > width - padding && anchorX <= 1 - xStep) {\n      anchorX += xStep;\n      right -= xStep * selfWidth;\n    }\n  }\n\n  // Find the name of the new anchor position\n  return Object.keys(ANCHOR_POSITION).find((positionType) => {\n    const anchorPosition = ANCHOR_POSITION[positionType];\n    return anchorPosition.x === anchorX && anchorPosition.y === anchorY;\n  });\n}\n"],"file":"dynamic-position.js"}