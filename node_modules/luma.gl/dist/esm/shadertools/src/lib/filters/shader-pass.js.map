{"version":3,"sources":["../../../../../../src/shadertools/src/lib/filters/shader-pass.js"],"names":["moduleToFilter","module","fs","filter","args","Array","isArray","join","name","sampler","Error"],"mappings":"AAAA,OAAO,SAASA,cAAT,CAAwBC,MAAxB,EAAgC;AACrC,MAAIC,EAAE,GAAG,IAAT;;AAEA,MAAID,MAAM,CAACE,MAAX,EAAmB;AACjB,QAAMC,IAAI,GAAGC,KAAK,CAACC,OAAN,CAAcL,MAAM,CAACE,MAArB,gBAAoCF,MAAM,CAACE,MAAP,CAAcI,IAAd,CAAmB,GAAnB,CAApC,IAAgE,EAA7E;AACAL,IAAAA,EAAE,aACJD,MAAM,CAACC,EADH,8KASaD,MAAM,CAACO,IATpB,sCASoDJ,IATpD,YAAF;AAYD;;AAED,MAAIH,MAAM,CAACQ,OAAX,EAAoB;AAClBP,IAAAA,EAAE,aACJD,MAAM,CAACC,EADH,8HAQaD,MAAM,CAACO,IARpB,mDAAF;AAWD;;AAED,MAAI,CAACN,EAAL,EAAS;AACP,UAAM,IAAIQ,KAAJ,WAAaT,MAAM,CAACO,IAApB,mCAAN;AACD;;AAED,SAAON,EAAP;AACD","sourcesContent":["export function moduleToFilter(module) {\n  let fs = null;\n\n  if (module.filter) {\n    const args = Array.isArray(module.filter) ? `, ${module.filter.join(',')}` : '';\n    fs = `\\\n${module.fs}\n\nuniform sampler2D texture;\nuniform vec2 texSize;\nvarying vec2 texCoord;\n\nvoid main() {\n  gl_FragColor = texture2D(texture, texCoord);\n  gl_FragColor = ${module.name}_filterColor(gl_FragColor${args});\n}\n`;\n  }\n\n  if (module.sampler) {\n    fs = `\\\n${module.fs}\n\nuniform sampler2D texture;\nuniform vec2 texSize;\nvarying vec2 texCoord;\n\nvoid main() {\n  gl_FragColor = ${module.name}_sampleColor(texture, texCoord, texSize);\n}\n`;\n  }\n\n  if (!fs) {\n    throw new Error(`${module.name} no fragment shader generated`);\n  }\n\n  return fs;\n}\n"],"file":"shader-pass.js"}